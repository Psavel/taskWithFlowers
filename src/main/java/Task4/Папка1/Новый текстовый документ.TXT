Подскажите, пожалуйста, столкнулся с проблемой (в связи с тем, что умею выводить только "Привет мир" на страницу), : на компьютере имеется html-таблица, ячейки которой могу редактировать и скачивать txt-файл, в котором отображаются данные из таблицы. Вопрос, можно ли используя только JavaScript и JQuery считать данные из txt и заполнить таблицу? 
Задача нужна для того, чтобы после добавления столбцов в таблице (по кнопки с помощью js-скрипта, можно было скачать файл (скрипт уже есть) и при открытии страницы заново можно было выгрузить данные из файла в таблицу сразу).

Буду очень рад, если кто-то подскажет, пока пришел к выводу, что нужен php или ajax. Но можно ли каким-то другим способом ограничиться JS?
0
Лучшие ответы (1)
Сообщение: #13188821

Similar
Эксперт
41792 / 34177 / 6122
Регистрация: 12.04.2006
Сообщений: 57,940
24.12.2018, 00:26
Ответы с готовыми решениями: 
HTML+JavaScript чтение TXT на хостинге
Доброго времени суток! Сразу хочу сказать, что о вредоносных программах речь не идёт. Проблема у...

 Чтение txt-файла и заполнение таблицы Excel
Добрый день, есть текстовый файл. Из него вынимаем данные, и записываем в excel таблицу. Вопрос как...

Чтение данных из *.txt файла, находящегося в ресурсах, и заполнение этими данными DataGridView
На форме расположен ComboBox, в котором можно выбрать один из типов резьбы (G,M,Pg,Rp,Tr и все...

Чтение данных с одного txt файла, запись данных во второй txt в определенную позицию
Добрый день, уважаемые форумчане! Нужна ваша помощь. Задача поставлена так: существует файл...

Чтение txt файла и заполнение массива данными из него
Доброго времени суток! Захотел написать метод, который будет считывать данные из файла и закидывать...

13

kalabuni
супермизантроп
Эксперт JS
3401 / 2699 / 646
Регистрация: 18.04.2012
Сообщений: 8,214
24.12.2018, 08:44	2
Лучший ответ Сообщение было отмечено Oetas как решение
Решение
Цитата Сообщение от Oetas  Посмотреть сообщение
пришел к выводу, что нужен php или ajax
технология ajax без проблем позволяет получать содержимое текстового файла
1. создайте текстовой файл myfile.txt с нужным вам содержимым
2. в той же директории создайте файл index.html со следующим кодом внутри:
HTML5Выделить код
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
    <script>
var htReq = ('v' == '\v') ? new ActiveXObject ('Microsoft.XMLHTTP') : new XMLHttpRequest ();
 
function sendReq ()
{
htReq.open ('get', 'myfile.txt');
htReq.onreadystatechange = getReq;
htReq.send (null);
}
 
function getReq ()
{
if (htReq.readyState == 4) alert (htReq.responseText); // !!!
}
 
 
    </script>
    <button onclick="sendReq ()">Start</button>
откройте файл index.html в браузере и кликните по кнопке "start" -- страница получит содержимое текстового файла myfile.txt и выведет его в модальном окошке

для решения вашей задачи вам нужно вместо alert (htReq.responseText); // !!! прописать код, который содержимое текстового файла занесёт в нужные вам ячейки таблицы -- с этим помочь не могу, потому как не владею информацией ни о таблице, ни о текстовом файле
0
Oetas
0 / 0 / 0
Регистрация: 24.12.2016
Сообщений: 11
24.12.2018, 08:46  [ТС]	3
Спасибо за ответ. Но Ajax не получится в моих условиях использовать. Все, что имею - JS и JQuery.

Поэтому ищу варианты, которые помогут тем, что имею. Нашел способ заполнить таблицу из Json. Но вот как при изменении таблицы записать новые данные в Json не знаю.
0
kalabuni
супермизантроп
Эксперт JS
3401 / 2699 / 646
Регистрация: 18.04.2012
Сообщений: 8,214
24.12.2018, 09:04	4
Oetas, ajax -- это комбинация работы js и сервера
js поддерживается любым браузером, ваш компьютер -- это сервер
никаких более "условий" не нужно

так что... сделайте то, что я вам выше написал, лично убедитесь в том, что страница прочитывает текстовой файл, и не морочьте голову ни себе, ни людям

покуда вы изображаете попугая, с умным видом повторяющего где-то услышанные им слова (js, jquery, ajax, php, json), и не понимающего, что эти слова означают 
0
24.12.2018, 09:04

Oetas
0 / 0 / 0
Регистрация: 24.12.2016
Сообщений: 11
24.12.2018, 09:43  [ТС]	5
Спасибо большое. Получилось! 

Таблица состоит из 4-ех столбцов.

Номер Участник Состояние Описание

1111. Иванов. Готово. Предоставить доступ к БД
0
Oetas
0 / 0 / 0
Регистрация: 24.12.2016
Сообщений: 11
28.12.2018, 14:19  [ТС]	6
Подскажите, пожалуйста, сам так и не смог разобраться.

Есть скрипт:

JavascriptВыделить код
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
var htReq = ('v' == '\v') ? new ActiveXObject ('MicrosoftXMLHTTP') : new XMLHttpRequest ();
 
   function sendReq ()
 
  {
    htReq.open ('get', 'myfile.txt');
    htReq.onreadystatechange = getReq;
    htReq.send(null);
 
  }
 
  function getReq ()
  {
    if (htReq.readyState == 4)
    {
     document.getElementById('tablenew').innerHTML =  htReq.responseText;
    }
  }
Он добавляет содержимое текстового файла в таблицу, но естественно в одну ячейку и весь текст файла.

Как сделать так, чтобы он в конкретную ячейку конкретную часть текста добавлял? 

Таблица состоит из 4-ех столбцов:

Номер Автор Статус Содержание

В файле есть строка: 
736 Иванов Выполнен повторная регистрация

Нужно, чтобы в таблице html появилась эта строка, в ячейке Номер " 736", В Автор "Иванов", в Статус "выполнен", в Содержание "повторная регистрация".
0
kalabuni
супермизантроп
Эксперт JS
3401 / 2699 / 646
Регистрация: 18.04.2012
Сообщений: 8,214
28.12.2018, 23:40	7
Oetas, во-первых, необходимо так отформатировать строку текстового файла, чтобы можно было однозначно получить из неё именно ЧЕТЫРЕ "конкретные части"

из '736 Иванов Выполнен' путём разбиения по пробелам получается ТРИ "конкретные части", а вот как программа должна догадаться, что 'повторная регистрация' -- это всего ОДНА конкретная часть", а не ДВЕ?
у вас, что, пробел между словами 'повторная регистрация' имеет какой-то особый запах, отличный от запаха других пробелов в строке? 
тогда вам нужен специальный компьютер, имеющий "нюх, как у собаки, и глаз, как у орла" 



во-вторых, из вашего описания таблицы непонятно -- имеется ли в таблице код строки с 4-мя пустыми ячейками для заполнения их 4-мя "конкретными частями" из текстового файла, или же всю эту строку с 4-мя ячейками создавать надо?

итожу: 1) разделите "конкретные части" в строке текстового файла каким-то символом, которого гарантированно не будет внутри любой "конкретной части", таковым символом, например, может быть горизонтальная табуляция (клавиша TAB на клавиатуре)

2) приведите имеющийся изначально HTML-код таблицы
0
Oetas
0 / 0 / 0
Регистрация: 24.12.2016
Сообщений: 11
10.01.2019, 16:35  [ТС]	8
Спасибо за ответ. Разделил части с помощью символа TAB.
Код таблицы:
HTML5Выделить код
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
<table id = "ztable" border= "1", cellpadding= "5" cellspacing = "2">
  <tr>
    <th> Номер заявки </th>
    <th> Инициатор </th>
    <th> Контактный телефон </th>
    <th> Статус </th>
    <th> Описание </th>  
  </tr>
  <tr>
    <td> 1 </td>
    <td> Иванов Иван Иванович </td>
    <td> 8218 </td>
    <td> Готово </td>
    <td> Дать права на редактирование </td>  
  </tr>
</table>
 Комментарий модератора 
	
Правила форума
4. Порядок создания тем.
4.9 Используйте тэги форматирования текста и редактор формул для удобства восприятия ваших сообщений другими пользователями.
Памятка «Как работать в редакторе сообщений»
0
kalabuni
супермизантроп
Эксперт JS
3401 / 2699 / 646
Регистрация: 18.04.2012
Сообщений: 8,214
11.01.2019, 06:46	9
Oetas, строка для данных Иванова Ивана Ивановича в таблице изначально имеется, так?

Иванов из текстового файла -- это тот же самый Иванов, который из таблицы, или же это другой человек, просто однофамилец первого? 

итоговая формулировка вопроса: после манипуляций с прочтением текстового файла таблица должна иметь одну строку с ячейками <td> или две?
0
Oetas
0 / 0 / 0
Регистрация: 24.12.2016
Сообщений: 11
11.01.2019, 19:09  [ТС]	10
Спасибо за ответ! После чтения данных из файла в таблице должен быть один "<td>"
0
kalabuni
супермизантроп
Эксперт JS
3401 / 2699 / 646
Регистрация: 18.04.2012
Сообщений: 8,214
12.01.2019, 16:28	11
Oetas, понятно, нужно просто тупо заменить содержимое всех 4-х ячеек первой* строки таблицы на 4-е "конкретные части" из текстового файла.
примечание: * в js строки таблицы нумеруются сверху вниз, начиная с нулевой, а ячейки в строке таблицы -- слева направо, и также начиная с нулевой
итак, для файла myfile.txt следующего содержания:
Код
736 Иванов Выполнен повторная регистрация
и для вашей страницы с таблицей #ztable
измените функцию getReq () из моего кода выше следующим образом:
JavascriptВыделить код
1
2
3
4
5
6
7
8
9
function getReq ()
{
if (htReq.readyState == 4)
   {
   var tblRo1Ce = document.getElementById ('ztable').rows [1].cells; // коллекция ячеек первой строки таблицы
   var cont = htReq.responseText.split ('\t'); // массив "конкретных частей" из текстового файла
   for var j = 0; j < 4; j++) tblRo1Ce [j].innerHTML = cont [j];
   }
}
напоминаю, что мой код "заточен" для случая, когда html-файл с таблицей и текстовой файл находятся в одной папке / директории

PS. вообще-то ваша задача не относится к web-программированию, обработка файлов на конкретном компьютере обычно реализуется средствами WSH, и здесь на форуме для таких задач есть специальный раздел 
так что в будущем предложенный мною способ (читать локальный файл через ajax) не используйте -- это нерационально, что-то типа "похода Суворова из Челябинска в Архангельск через Альпы"
0
amr-now
Эксперт JS
1885 / 1103 / 519
Регистрация: 14.06.2018
Сообщений: 2,701
12.01.2019, 18:25	12
А я смутно понимаю задачу в этой теме.
Вот что у меня получилось:
PHP/HTMLВыделить код
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <style>
        table {
            border: 1px solid gray;
        }
 
        td,
        th {
            border: 1px solid gray;
        }
    </style>
</head>
<body>
    <table id="ztable" contenteditable="true">
        <tr>
            <th>Номер заявки</th>
            <th>Инициатор</th>
            <th>Контактный телефон</th>
            <th>Статус</th>
            <th>Описание</th>
        </tr>
        <tr>
            <td>1</td>
            <td>Иванов Иван Иванович</td>
            <td>8218</td>
            <td>Готово</td>
            <td>Дать права на редактирование</td>
        </tr>
    </table>
    <input type="button" id="ld" value="Загрузить">
    <input type="button" id="sv" value="Сохранить">
    <script>
        document.getElementById("ld").onclick=handler;
 
        async function handler(){
            let array = (await httpAsync("myfile.txt")).split("\t");
            let tab = document.getElementById("ztable");
 
            tab.rows[1].cells[0].textContent = array[0];
            tab.rows[1].cells[1].textContent = array[1];
            tab.rows[1].cells[3].textContent = array[2];
            tab.rows[1].cells[4].textContent = array[3];
        }
        function httpAsync(url, method = "GET", body) {
            return new Promise((resolve, reject) => {
                let xhr = new XMLHttpRequest();
                xhr.open(method, url);
 
                xhr.onload = () => {
                    if (xhr.status === 200)
                        resolve(xhr.response);
                    else {
                        reject(new Error(`${xhr.status}: ${xhr.statusText}`));
                    }
                };
                xhr.onerror = () => {
                    reject(new Error(`Ошибка сети. Сервер не отдал код ошибки.`));
                };
                xhr.send(body);
            });
        }
    </script>
</body>
</html>
Номер телефона почему-то в таблице не хранится.
Просто так данные из отредактированной таблицы без специальной настройки сервера мы не сохраним на сервере.
В данный момент данные можно только пpx solid gray;
        }
    </style>
</head>
<body>
    <table id="ztable" contenteditable="true">
        <tr>
            <th>Номер заявки</th>
            <th>Инициатор</th>
            <th>Контактный телефон</th>
            <th>Статус</th>
            <th>Описание</th>
        </tr>
        <tr>